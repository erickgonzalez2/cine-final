<div class="w-full p-10" >

    <p class="font-light text-xl" *ngIf="!edit">Crear usuario</p>
    <p class="font-light text-xl" *ngIf="edit">Editar usuario</p>

    <mat-card class="mt-10">
        <mat-card-content>

            <form [formGroup]="userForm">

                <div class="grid grid-cols-4">

                    <div class="col-span-1 p-2">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-label>Usuario</mat-label>
                            <input type="text" matInput formControlName="username">
                            <mat-error>El <strong>usuario</strong> es requerido</mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col-span-1 p-2">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-label>Nombre</mat-label>
                            <input type="text" matInput formControlName="name">
                            <mat-error>El <strong>nombre</strong> es requerido</mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col-span-1 p-2">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-label>Apellido paterno</mat-label>
                            <input type="text" matInput formControlName="lastName">
                            <mat-error>El <strong>apellido paterno</strong> es requerido</mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col-span-1 p-2">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-label>Apellido materno</mat-label>
                            <input type="text" matInput formControlName="secondLastName">
                            <mat-error>El <strong>apellido materno</strong> es requerido</mat-error>
                        </mat-form-field>
                    </div>

                </div>

                <div class="grid grid-cols-4 mt-5">

                    <div class="col-span-1 p-2">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-label>Seleccionar rol</mat-label>
                            <mat-select formControlName="rol">
                                <mat-option *ngFor="let role of roles" [value]="role.id">
                                    {{role.nombre}}
                                </mat-option>
                            </mat-select>
                            <mat-error>El <strong>rol</strong> es requerido</mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col-span-1 p-2" *ngIf="(!edit && !editPass) || (edit && editPass)">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-label>Contraseña</mat-label>
                            <input [type]="hide ? 'password' : 'text'" matInput formControlName="password">
                            <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                                [attr.aria-pressed]="hide">
                                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                            </button>
                            <mat-error>La <strong>contraseña</strong> es requerida</mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col-span-1 p-2" *ngIf="(!edit && !editPass) || (edit && editPass)">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-label>Confirmar contraseña</mat-label>
                            <input [type]="hideConfirm ? 'password' : 'text'" matInput
                                formControlName="passwordConfirm">
                            <button mat-icon-button matSuffix (click)="hideConfirm = !hideConfirm"
                                [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideConfirm">
                                <mat-icon>{{hideConfirm ? 'visibility_off' : 'visibility'}}</mat-icon>
                            </button>
                            <mat-error>Por favor confirme la <strong>contraseña</strong></mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col-span-1 p-2">
                        <mat-slide-toggle class="mt-2" [color]="'primary'"
                            formControlName="enabled">Estado</mat-slide-toggle>
                    </div>
                </div>

                <div class="grid grid-cols-4 mt-5">

                    <div class="col-span-1 col-start-1" *ngIf="edit">
                        <mat-slide-toggle class="mt-2" [color]="'primary'" [(ngModel)]="editPass" [ngModelOptions]="{standalone : true}" >Cambiar contraseña</mat-slide-toggle>
                    </div>

                    <div class="col-span-1 col-start-4">                        

                        <button class="w-full " mat-flat-button [color]="'primary'" (click)="saveUser()" *ngIf="!edit" >Crear</button>
                        <button class="w-full " mat-flat-button [color]="'primary'" (click)="updateUser()" *ngIf="edit">Actualizar</button>
                    </div>

                </div>

            </form>
        </mat-card-content>
    </mat-card>


</div>